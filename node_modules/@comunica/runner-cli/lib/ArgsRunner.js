"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const runner_1 = require("@comunica/runner");
function runArgs(configResourceUrl, argv, stdin, stdout, stderr, env, runnerUri, properties) {
    runner_1.Setup.run(configResourceUrl, { argv, env, stdin }, runnerUri, properties)
        .then((results) => {
        results.forEach((result) => {
            if (result.stdout) {
                result.stdout.on('error', console.error);
                result.stdout.pipe(stdout);
            }
            if (result.stderr) {
                result.stderr.on('error', console.error);
                result.stderr.pipe(stderr);
            }
        });
    })
        .catch(console.error);
}
exports.runArgs = runArgs;
function runArgsInProcess(moduleRootPath, defaultConfigPath) {
    const argv = process.argv.slice(2);
    runArgs(process.env.COMUNICA_CONFIG
        ? process.cwd() + '/' + process.env.COMUNICA_CONFIG : defaultConfigPath, argv, process.stdin, process.stdout, process.stderr, process.env, null, { mainModulePath: moduleRootPath });
}
exports.runArgsInProcess = runArgsInProcess;
function runArgsInProcessStatic(actor) {
    const argv = process.argv.slice(2);
    actor.run({ argv, env: process.env, stdin: process.stdin })
        .then((result) => {
        if (result.stdout) {
            result.stdout.on('error', console.error);
            result.stdout.pipe(process.stdout);
        }
        if (result.stderr) {
            result.stderr.on('error', console.error);
            result.stderr.pipe(process.stderr);
        }
    }).catch(console.error);
}
exports.runArgsInProcessStatic = runArgsInProcessStatic;
//# sourceMappingURL=ArgsRunner.js.map